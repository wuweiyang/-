###计算机网络：网络层
####4.2.2分类的ip地址
*A类，B类C类地址的网络号字段分别为1,2,3字节长，而在网络号最前面1~3位的类别位，其数值分别规定为，0,10,110*

*A类B类C类地址的主机号字段分别为3个，2个，1个，字节长。*
<html>
<body>

<table border="1">
  <tr>
    <th>网络类别</th>
    <th>第一个可指派的网络号</th>
    <th>最后一个可指派的网络号</th>
    <th>每个网络中最大主机数</th>

  </tr>
  <tr>
    <td>126(2^7-2)</td>
    <td>1</td>
    <td>126</td>
    <td>16777214</td>
  </tr>
  <tr>
      <td>16383(2^14-1)</td>
      <td>128.1</td>
      <td>191.255</td>
      <td>65534</td>
  </tr>
  <tr>
      <td>2097151(2^21-1)</td>
      <td>192.0.1</td>
      <td>223.255.255</td> 
      <td>254</td>
  </tr>
</table>
</body>
</html>
####地址解析协议A RP
*ARP协议是在主机的ARP高速缓存中存放一个从ip地址到硬件地址的映射表，这些都是该主机目前知道的一些地址*
####主机获取硬件地址的方法  
*当主机A要向本局域网上的某个主机B发送IP数据报时，就先在其高速缓存中查看有无主机B的IP地址,如有就在ARP高速缓存中查出其对应的硬件地址再把这个硬件地址写入到mac帧，发往此硬件地址*
*如果查不到主机的硬件地址，就根据以下步骤来获取B的硬件地址*
1. ARP进程再本局域网上广播发送一个ARP请求分组，请求分组的内容是：自己的ip和硬件地址，想要知道ip地址为x.x.x.x的主机的硬件地址
2. 在本局域网上的所有主机上运行的APR进程都会收到此APR请求分组。
3. 主机B在APR请求分中见到自己的IP地址，就向主机A发送ARP响应分组，并写入自己得到硬件地址，其余所有主机都不理睬这个ARP分组请求。ARP响应分组的内容:自己的ip和硬件地址。
4. 主机A收到B的ARP响应分组后，就在其ARP高速缓存中写入主机B的IP到硬件地址的映射。
<p>当主机A向B发送其ARP请求分组时，就把自己的IP到硬件地址的映射写入到ARP请求分组中，当B收到A的ARP请求分组时，就将主机A的这一地址映射写入到自己的ARP高速缓存中</p>
<font color="red">ARP是解决同一局域网上的主机或路由器的IP到硬件地址的映射问题</font>
#####使用ARP四种典型情况 
1. 发送方是主机，要把IP书记包发送到本网络上的一个主机。这时用ARP找到主机的硬件地址，
2. 发送方是主机，要把IP数据报发送到另一个网络上的一个主机。这时用ARP找到本网络上的一个路由器的硬件地址。剩下的工作由路由器完成
3. 发送方是路由器，要把IP数据发送到本网络上的一个主机。这时用ARP找到目的主机的硬件硬地址。
4. 发送方是路由器，要把ip数据包发送到另一网络上的一个主机，这时用ARP找到本网络上的一个路由器硬件地址，剩下的工作由这个路由器完成

###网际控制报文协议
报文的种类：<p>ICMP差错报文<p> <p>ICMP询问报文</p>
#####5种差错报文
1. 终点不可达：当路由器或主机不能交付数据报时就向源点发送终点不可到报文
2. 源点抑制：当路由器或主机由于拥塞而丢弃数据报时，就向源点发送源点抑制报文，使源点知道应当把数据报的发送速率放慢
3. 时间超过：当路由器收到生存时间为零的数据报时，除丢弃该数据报外，还要向源点发送时间超过报文。当终点不能在规定的时间内收到一个数据报的全部数据报片时，就把自己收到的全部数据报片全部丢弃，并向源点发送时间超过报文。
4. 参数问题：当路由器或主机收到的数据报的首部中的有的字段的值不正确时，就丢弃该数据报，并向源点发送参数问题报文
5. 改变路由器：路由器把路由器改变报文发送给主机，让主机知道下次应该把数据报发送给另外的主机
 

 #####不应该发送ICMP差错报文的情况
 1. 对ICMP差错报告报文不再发送ICMP差错报文
 2. 对第一个分片数据报片的所有后续数据报片都不发送ICMP差错报告报文
 3. 对既有多播地址的数据包都不发送ICMP差错报告报文
 4. 对具有特殊地址的（如127.0.0.0或0.0.0.0）的数据不发送ICMP差错报告报文
